<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Khronos Texture Tools: toktx</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ktx_document_small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Khronos Texture Tools
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('toktx.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">toktx </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Create a KTX file from netpbm format files.</p>
<h1><a class="anchor" id="toktx_synopsis"></a>
SYNOPSIS</h1>
<p>toktx [options] <em>outfile</em> [<em>infile</em>.{pam,pgm,ppm} ...]</p>
<h1><a class="anchor" id="toktx_description"></a>
DESCRIPTION</h1>
<p>Create a Khronos format texture file (KTX) from a set of JPEG (.jpg), PNG (.png) or Netpbm format (.pam, .pgm, .ppm) images. It writes the destination ktx file to <em>outfile</em>, appending ".ktx{,2}" if necessary. If <em>outfile</em> is '-' the output will be written to stdout.</p>
<p><b>toktx</b> reads each named <em>infile</em>. which must be in .jpg, .png, .pam, .ppm or .pgm format. <em>infiles</em> prefixed with '@' are read as text files listing actual file names to process with one file path per line. Paths must be absolute or relative to the current directory when <b>toktx</b> is run. If '@@' is used instead, paths must be absolute or relative to the location of the list file.</p>
<p>.jpg files yeild RED or RGB textures according to the actual components in the file. .png files yield RED, RG, RGB or RGBA textures according to the files's <em>color</em> type, .ppm files RGB textures, .pgm files RED textures and .pam files RED, RG, RGB or RGBA textures according to the file's TUPLTYPE and DEPTH. Other formats can be readily converted to the supported formats using tools such as ImageMagick and XnView.</p>
<p>The primaries, transfer function (OETF) and the texture's sRGB-ness is set based on the input file. .jpg files always useBT709/sRGB primaries and the sRGB OETF. Netpbm files always use BT.709/sRGB primaries and the the BT.709 OETF. <b>toktx</b> tranforms the image to the sRGB OETF, sets the transfer function to sRGB and creates sRGB textures for these inputs.</p>
<p>For .png files the OETF is set as follows:</p>
<dl>
<dt>No color-info chunks or sRGB chunk present: </dt>
<dd>primaries are set to BT.709 and OETF to sRGB. </dd>
<dt>sRGB chunk present: </dt>
<dd>primaries are set to BT.709 and OETF to sRGB. gAMA and cHRM chunks are ignored. </dd>
<dt>iCCP chunk present: </dt>
<dd>General ICC profiles are not supported by toktx or the KTX2 format. sRGB chunk must not be present. </dd>
<dt>gAMA and/or cHRM chunks present without sRGB or iCCP: </dt>
<dd>If gAMA is 45455 the OETF is set to sRGB, if 100000 it is set to linear. Other gAMA values are unsupported. cHRM is currently unsupported. We should attempt to map the primary values to one of the standard sets listed in the Khronos Data Format specification. </dd>
</dl>
<p>The following options are always available: </p><dl>
<dt>&ndash;2d </dt>
<dd>If the image height is 1, by default a KTX file for a 1D texture is created. With this option one for a 2D texture is created instead. </dd>
<dt>&ndash;automipmap </dt>
<dd>Causes the KTX file to be marked to request generation of a mipmap pyramid when the file is loaded. This option is mutually exclusive with <b>&ndash;genmipmap</b>, <b>&ndash;levels</b> and <b>&ndash;mipmap</b>. </dd>
<dt>&ndash;cubemap </dt>
<dd>KTX file is for a cubemap. At least 6 <em>infiles</em> must be provided, more if <b>&ndash;mipmap</b> or <b>&ndash;layers</b> is also specified. Provide the images in the order +X, -X, +Y, -Y, +Z, -Z where the arrangement is a left-handed coordinate system with +Y up. So if you're facing +Z, -X will be on your left and +X on your right. If <b>&ndash;layers</b> &gt; 1 is specified, provide the faces for layer 0 first then for layer 1, etc. Images must have an upper left origin so &ndash;lower_left_maps_to_s0t0 is ignored with this option. </dd>
<dt>&ndash;depth &lt;number&gt; </dt>
<dd>KTX file is for a 3D texture with a depth of <em>number</em> where <em>number</em> &gt; 1. Provide the file(s) for z=0 first then those for z=1, etc. It is an error to specify this together with <b>&ndash;layers</b> &gt; 1 or <b>&ndash;cubemap</b>. </dd>
<dt>&ndash;genmipmap </dt>
<dd>Causes mipmaps to be generated for each input file. This option is mutually exclusive with <b>&ndash;automipmap</b> and <b>&ndash;mipmap</b>. When set, the following mipmap-generation related options become valid, otherwise they are ignored. <dl>
<dt>&ndash;filter &lt;name&gt; </dt>
<dd>Specifies the filter to use when generating the mipmaps. <em>name</em> is a string. The default is <em>lanczos4</em>. The following names are recognized: <em>box</em>, <em>tent</em>, <em>bell</em>, <em>b-spline</em>, <em>mitchell</em>, <em>lanczos3</em>, <em>lanczos4</em>, <em>lanczos6</em>, <em>lanczos12</em>, <em>blackman</em>, <em>kaiser</em>, <em>gaussian</em>, <em>catmullrom</em>, <em>quadratic_interp</em>, <em>quadratic_approx</em> and <em>quadratic_mix</em>. </dd>
<dt>&ndash;fscale &lt;floatVal&gt; </dt>
<dd>The filter scale to use. The default is 1.0. </dd>
<dt>&ndash;wmode &lt;mode&gt; </dt>
<dd>Specify how to sample pixels near the image boundaries. Values are <em>wrap</em>, <em>reflect</em> and <em>clamp</em>. The default is <em>clamp</em>. </dd>
</dl>
</dd>
<dt>&ndash;layers &lt;number&gt; </dt>
<dd>KTX file is for an array texture with <em>number</em> of layers where <em>number</em> &gt; 1. Provide the file(s) for layer 0 first then those for layer 1, etc. It is an error to specify this together with <b>&ndash;depth</b> &gt; 1. </dd>
<dt>&ndash;levels &lt;number&gt; </dt>
<dd>KTX file is for a mipmap pyramid with <em>number</em> of levels rather than a full pyramid. <em>number</em> must be &lt;= the maximum number of levels determined from the size of the base image. Provide the base level image first, if using <b>&ndash;mipmap</b>. This option is mutually exclusive with <b>&ndash;automipmap</b>. </dd>
<dt>&ndash;mipmap </dt>
<dd>KTX file is for a mipmap pyramid with one <b>infile</b> being explicitly provided for each level. Provide the images in the order of layer then face or depth slice then level with the base-level image first then in order down to the 1x1 image or the level specified by <b>&ndash;levels</b>. This option is mutually exclusive with <b>&ndash;automipmap</b> and <b>&ndash;genmipmap</b>. <dl class="section note"><dt>Note</dt><dd>This ordering differs from that in the created texture as it is felt to be more user-friendly. </dd></dl>
</dd>
<dt>&ndash;nometadata </dt>
<dd>Do not write KTXorientation metadata into the output file. Metadata is written by default. Use of this option is not recommended. </dd>
<dt>&ndash;upper_left_maps_to_s0t0 </dt>
<dd>Map the logical upper left corner of the image to s0,t0. Although opposite to the OpenGL convention, this is the DEFAULT BEHAVIOUR. netpbm and PNG files have an upper left origin so this option does not flip the input images. When this option is in effect, toktx writes a KTXorientation value of S=r,T=d into the output file to inform loaders of the logical orientation. If an OpenGL {,ES} loader ignores the orientation value, the image will appear upside down. </dd>
<dt>&ndash;lower_left_maps_to_s0t0 </dt>
<dd>Map the logical lower left corner of the image to s0,t0. This causes the input netpbm and PNG images to be flipped vertically to a lower-left origin. When this option is in effect, toktx writes a KTXorientation value of S=r,T=u into the output file to inform loaders of the logical orientation. If a Vulkan loader ignores the orientation value, the image will appear upside down. This option is ignored with <b>&ndash;cubemap</b>. </dd>
<dt>&ndash;linear </dt>
<dd>Force the created texture to have a linear transfer function. Use this only when you know the file format information is wrong and the input file uses a linear transfer function. If this is specified, the default color transform of Netpbm images to sRGB color space will not be performed.  </dd>
<dt>&ndash;srgb </dt>
<dd>Force the created texture to have an srgb transfer function. As with <b>&ndash;linear</b>, use with caution. Like <b>&ndash;linear</b>, the default color transform of Netpbm images will not be performed. </dd>
<dt>&ndash;resize &lt;width&gt;x&lt;height&gt; </dt>
<dd>Resize images to <em>width</em> X <em>height</em>. This should not be used with <b>&ndash;mipmap</b> as it would resize all the images to the same size. Resampler options can be set via <b>&ndash;filter</b> and <b>&ndash;fscale</b>.  </dd>
<dt>&ndash;scale &lt;value&gt; </dt>
<dd>Scale images by <em>value</em> as they are read. Resampler options can be set via <b>&ndash;filter</b> and <b>&ndash;fscale</b>. . </dd>
<dt>&ndash;t2 </dt>
<dd>Output in KTX2 format. Default is KTX. </dd>
<dt>&ndash;bcmp </dt>
<dd>Supercompress the image data with Basis Universal. Implies <b>&ndash;t2</b>. RED images will become RGB with RED in each component. RG images will have R in the RGB part and G in the alpha part of the compressed texture. When set, the following Basis-related options become valid otherwise they are ignored. <dl>
<dt>&ndash;no_multithreading </dt>
<dd>Disable multithreading. By default Basis compression will use the numnber of threads reported by <code>thread::hardware_concurrency</code> or 1 if value returned is 0. </dd>
<dt>&ndash;threads &lt;count&gt; </dt>
<dd>Explicitly set the number of threads to use during compression. <b>&ndash;no_multithreading</b> must not be set. </dd>
<dt>&ndash;clevel &lt;level&gt; </dt>
<dd>Basis compression level, an encoding speed vs. quality tradeoff. Range is 0 - 5, default is 1. Higher values are slower, but give higher quality. </dd>
<dt>&ndash;qlevel &lt;level&gt; </dt>
<dd>Basis quality level. Range is 1 - 255. Lower gives better compression/lower quality/faster. Higher gives less compression /higher quality/slower. Values of <b>&ndash;max_endpoints</b> and <b>&ndash;max-selectors</b> computed from this override any explicitly set values. Default is 128, if either of <b>&ndash;max_endpoints</b> or <b>&ndash;max_selectors</b> is unset, otherwise those settings rule. </dd>
<dt>&ndash;max_endpoints &lt;arg&gt; </dt>
<dd>Manually set the maximum number of color endpoint clusters from 1-16128. Default is 0, unset. </dd>
<dt>&ndash;endpoint_rdo_threshold &lt;arg&gt; </dt>
<dd>Set endpoint RDO quality threshold. The default is 1.25. Lower is higher quality but less quality per output bit (try 1.0-3.0). This will override the value chosen by <code>&ndash;qual</code>. </dd>
<dt>&ndash;max_selectors &lt;arg&gt; </dt>
<dd>Manually set the maximum number of color selector clusters from 1-16128. Default is 0, unset. </dd>
<dt>&ndash;selector_rdo_threshold &lt;arg&gt; </dt>
<dd>Set selector RDO quality threshold. The default is 1.5. Lower is higher quality but less quality per output bit (try 1.0-3.0). This will override the value chosen by <code>&ndash;qual</code>. </dd>
<dt>&ndash;normal_map </dt>
<dd>Tunes codec parameters for better quality on normal maps (no selector RDO, no endpoint RDO). Only valid for linear textures. </dd>
<dt>&ndash;separate_rg_to_color_alpha </dt>
<dd>Separates the input R and G channels to RGB and A (for tangent space XY normal maps). Only needed with 3 or 4 component input images. </dd>
<dt>&ndash;no_endpoint_rdo </dt>
<dd>Disable endpoint rate distortion optimizations. Slightly faster, less noisy output, but lower quality per output bit. Default is to do endpoint RDO. </dd>
<dt>&ndash;no_selector_rdo </dt>
<dd>Disable selector rate distortion optimizations. Slightly faster, less noisy output, but lower quality per output bit. Default is to do selector RDO. </dd>
</dl>
</dd>
<dt>&ndash;uastc [&lt;level&gt;] </dt>
<dd><p class="startdd">Create a texture in high-quality transcodable UASTC format. Implies <b>&ndash;t2</b>. The optional parameter <em>level</em> selects a speed vs quality tradeoff as shown in the following table:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Level </th><th class="markdownTableHeadCenter">Speed </th><th class="markdownTableHeadCenter">Quality  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">0 </td><td class="markdownTableBodyCenter">Fastest </td><td class="markdownTableBodyCenter">43.45dB  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">1 </td><td class="markdownTableBodyCenter">Faster </td><td class="markdownTableBodyCenter">46.49dB  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">2 </td><td class="markdownTableBodyCenter">Default </td><td class="markdownTableBodyCenter">47.47dB  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">3 </td><td class="markdownTableBodyCenter">Slower </td><td class="markdownTableBodyCenter">48.01dB  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">4 </td><td class="markdownTableBodyCenter">Very slow </td><td class="markdownTableBodyCenter">48.24dB  </td></tr>
</table>
<p class="enddd">When set the following options become available for controlling the optional Rate Distortion Optimization (RDO) post-process stage that conditions the encoded UASTC texture data so it can be more effectively LZ compressed: </p><dl>
<dt>&ndash;uastc_rdo_q [&lt;quality&gt;] </dt>
<dd>Enable UASTC RDO post-processing and optionally set UASTC RDO quality scalar to <em>quality</em>. Lower values yield higher quality/larger LZ compressed files, higher values yield lower quality/smaller LZ compressed files. A good range to try is [.2-4]." Full range is .001 to 10.0. Default is 1.0. </dd>
<dt>&ndash;uastc_rdo_d &lt;dictsize&gt; </dt>
<dd>Set UASTC RDO dictionary size in bytes. Default is 32768. Lower values=faster, but give less compression. Possible range is 256 to 65536. </dd>
</dl>
</dd>
<dt>&ndash;zcmp [&lt;compressionLevel&gt;] </dt>
<dd>Supercompress the data with Zstandard. Implies <b>&ndash;t2</b>. Can be used with data in any format except Basis Universal (<b>&ndash;bcmp</b>). Most effective with RDO-conditioned UASTC or uncompressed formats. The optional <em>compressionLevel</em> range is 1 - 22 and the default is 3. Lower values=faster but give less compression. Values above 20 should be used with caution as they require more memory. </dd>
<dt>&ndash;help </dt>
<dd>Print this usage message and exit. </dd>
<dt>&ndash;version </dt>
<dd>Print the version number of this program and exit. </dd>
</dl>
<p>In case of ambiguity, such as when the last option is one with an optional parameter, options can be separated from file names with " -- ".</p>
<p>Options can also be set in the environment variable TOKTX_OPTIONS. TOKTX_OPTIONS is parsed first. If conflicting options appear in TOKTX_OPTIONS or the command line, the last one seen wins. However if both <b>&ndash;automipmap</b> and <b>&ndash;mipmap</b> are seen, it is always flagged as an error. You can, for example, set TOKTX_OPTIONS=&ndash;lower_left_maps_to_s0t0 to change the default mapping of the logical image origin to match the GL convention.</p>
<h1><a class="anchor" id="toktx_exitstatus"></a>
EXIT STATUS</h1>
<p><b>toktx</b> exits 0 on success, 1 on command line errors and 2 on functional errors.</p>
<h1><a class="anchor" id="toktx_history"></a>
HISTORY</h1>
<dl class="section user"><dt>Version 4.0 (using new version numbering system)</dt><dd><ul>
<li>Add KTX version 2 support including Basis Universal encoding.</li>
<li>Add .png reader.</li>
<li>Transform NetPBM input files to sRGB OETF.</li>
<li>Add mipmap generation.</li>
<li>Remove legacy items.</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Version 1.3</dt><dd><ul>
<li>Switch to ktxTexture API.</li>
<li>Add &ndash;levels option.</li>
<li>Add &ndash;2d option.</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Version 1.2</dt><dd><ul>
<li>Remove &ndash;sized; always create sized format.</li>
<li>Write metadata by default.</li>
<li>Bug fixes.</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Version 1.1</dt><dd><ul>
<li>Moved &ndash;alpha and &ndash;luminance to legacy.</li>
</ul>
</dd></dl>
<h1><a class="anchor" id="toktx_author"></a>
AUTHOR</h1>
<p>Mark Callow, Edgewise Consulting www.edgewise-consulting.com </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Jun 5 2020 01:53:55 for Khronos Texture Tools by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
